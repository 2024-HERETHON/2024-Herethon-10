<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <!-- css -->
    <!-- 기본 css  -->
    <link rel="stylesheet" href="./static/assets/css/fonts.css">
    <link rel="stylesheet" href="./static/assets/css/reset.css">
    <link rel="stylesheet" href="./static/assets/css/sytle.css">

    <!-- main 페이지 css -->
    <link rel="stylesheet" href="./static/assets/css/section/main.css">
    <title>기로프</title>
</head>

<body>
    <div class="main_wrap container">
        <header id="header">
            <h1><a href="/">기로프</a></h1>
            <a href="/template/login.html">로그인</a>
            <div>
                <a href="./template/team/team_made.html" class="create">
                    <img src="./static/assets/img/plus.svg" alt="">
                </a>
                <a href="./template/mypage.html">
                    <div class="profile"></div>
                </a>
            </div>
        </header>
        <main id="main">
            <a href="./template/team/team.html">
                <div class="box">
                    <div class="top">
                        <div class="top_header">
                            <h2>여기톤 10조</h2>
                            <img class="pin_img" src="./static/assets/img/pin_bold.svg" alt="">
                        </div>
                        <div class="profile_box">
                            <img src="./static/assets/img/profile.png" alt="profile" class="profile">
                        </div>
                    </div>
                    <div class="middle">
                        <div class="graph">
                            <canvas id="doughnut-chart" width="100" height="100"></canvas>
                        </div>
                    </div>
                    <div class="bottom">
                        <div class="day">D-17</div>
                        <div class="parcent">60%</div>
                    </div>
                </div>
            </a>
            <a href="">
                <div class="box">
                    <div class="top">
                        <div class="top_header">
                            <h2>여기톤 10조</h2>
                            <img class="pin_img none" src="./static/assets/img/pin_bold.svg" alt="">
                        </div>
                        <div class="profile_box">
                            <img src="./static/assets/img/profile.png" alt="profile" class="profile">
                        </div>
                    </div>
                    <div class="middle">
                        <div class="graph">
                            <canvas id="doughnut-chart" width="100" height="100"></canvas>
                        </div>
                    </div>
                    <div class="bottom">
                        <div class="day">D-17</div>
                        <div class="parcent">60%</div>
                    </div>
                </div>
            </a>
            <a href="">
                <div class="box">
                    <div class="top">
                        <div class="top_header">
                            <h2>여기톤 10조</h2>
                            <img class="pin_img none" src="./static/assets/img/pin_bold.svg" alt="">
                        </div>
                        <div class="profile_box">
                            <img src="./static/assets/img/profile.png" alt="profile" class="profile">
                        </div>
                    </div>
                    <div class="middle">
                        <div class="graph">
                            <canvas id="doughnut-chart" width="100" height="100"></canvas>
                        </div>
                    </div>
                    <div class="bottom">
                        <div class="day">D-17</div>
                        <div class="parcent">60%</div>
                    </div>
                </div>
            </a>
        </main>
    </div>

    <!-- script -->
    <!-- gsap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.0/gsap.min.js"></script>
    <script src="./static/js/chart.js"></script>

    <script>

        document.addEventListener('DOMContentLoaded', () => {
            fetch('./template/index_create.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('index-create-container').innerHTML = data;
                    initializeMainJS();
                })
                .catch(error => console.error('Error loading index_create.html:', error));
        });


    </script>

    <script>
        function initializeMainJS() {
            const Popup = document.querySelector('.popup_wrap');
            const No = document.querySelector('.no');
            const addTeam = document.querySelector('.add_team');
            const First = document.querySelector('.first');
            const Second = document.querySelector('.second');

            function showPop() {
                console.log(Popup)
                Popup.classList.remove('none');
                First.classList.remove('none');
            }

            function noPop() {
                Popup.classList.add('none');
                Second.classList.add('none');
            }

            // gsap 기본 상태
            gsap.set(addTeam, { bottom: '-400px' });

            function addFriend() {
                if (addTeam.classList[1] === 'none') {
                    addTeam.classList.remove('none');
                    gsap.to('.add_team', { duration: 1, bottom: "0", ease: "power3.out" });
                } else {
                    addTeam.classList.add('none');
                    gsap.to('.add_team', { duration: 1, bottom: "-400", ease: "power3.out" });
                }
            }

            function teamName() {
                console.log(First.classList)
                First.classList.add('none');
                Second.classList.remove('none');
            }

            window.showPop = showPop;
            window.noPop = noPop;
            window.addFriend = addFriend;
            window.teamName = teamName;
        }

        document.addEventListener('DOMContentLoaded', function() {
            const pinImages = document.querySelectorAll('.pin_img');

            pinImages.forEach(function(img) {
                if (!img.classList.contains('none')) {
                    img.closest('.box').classList.add('bordered');
                }
            });
        });
    </script>

</body>

</html>